schema: '2.0'
stages:
  clean_data:
    cmd: python -m german_credit_ml.clean --config params.yaml
    deps:
    - path: data/raw/german_credit_modified.csv
      hash: md5
      md5: be16965e43fda504d3406a0e51559da6
      size: 96764
    - path: german_credit_ml/clean.py
      hash: md5
      md5: 49cd9e9a532d60ea83095ce1947e2ee1
      size: 7443
    params:
      params.yaml:
        data_load.processed: data/processed/german_credit_clean.csv
        data_load.raw: data/raw/german_credit_modified.csv
    outs:
    - path: data/processed/german_credit_clean.csv
      hash: md5
      md5: 8072a5cf26c1cbf09f217b5007ccae79
      size: 77492
  eda:
    cmd: python -m german_credit_ml.eda --input-data 
      data/processed/german_credit_clean.csv --output-dir reports/figures/eda
    deps:
    - path: data/processed/german_credit_clean.csv
      hash: md5
      md5: 8072a5cf26c1cbf09f217b5007ccae79
      size: 77492
    - path: german_credit_ml/eda.py
      hash: md5
      md5: 329f45e34b8d47afef5354fd56233dc5
      size: 3428
    params:
      params.yaml:
        data_load.figures: reports/figures
        data_load.processed: data/processed/german_credit_clean.csv
    outs:
    - path: reports/figures/eda
      hash: md5
      md5: 6488b2285f5b36c0925a7c262d50df66.dir
      size: 402564
      nfiles: 5
  train:
    cmd: python -m german_credit_ml.modeling.train --input-data 
      data/processed/german_credit_clean.csv --model-output 
      models/xgboost_model.pkl --metrics-output reports/metrics.json 
      --plots-output reports/figures/training
    deps:
    - path: data/processed/german_credit_clean.csv
      hash: md5
      md5: 8072a5cf26c1cbf09f217b5007ccae79
      size: 77492
    - path: german_credit_ml/modeling/train.py
      hash: md5
      md5: 18d6c5a1e40222aea218908b22d01030
      size: 18710
    params:
      params.yaml:
        train:
          test_size: 0.2
          random_state: 42
          n_iter_search: 25
          model_output: models/xgboost_model_prueba.pkl
          metrics_output: reports/metrics.json
          plots_output: reports/figures/training
    outs:
    - path: models/xgboost_model.pkl
      hash: md5
      md5: 0f234ef1f1af1f077b0c6af3befdf022
      size: 283573
    - path: reports/figures/training
      hash: md5
      md5: f50fba9a6b9d3d463c6fa8bed94c11b1.dir
      size: 233431
      nfiles: 5
    - path: reports/metrics.json
      hash: md5
      md5: 5f660e46dfcf902cbfd7878297e7ae44
      size: 1554
  check_drift:
    cmd: python -m german_credit_ml.check_drift --input-data 
      data/processed/german_credit_clean.csv --report-output 
      reports/data_drift_report.html
    deps:
    - path: data/processed/german_credit_clean.csv
      hash: md5
      md5: 8072a5cf26c1cbf09f217b5007ccae79
      size: 77492
    - path: german_credit_ml/check_drift.py
      hash: md5
      md5: d11ab563d67f23bc39f75e659917913a
      size: 12472
    params:
      params.yaml:
        reports.data_drift: reports/data_drift_report.html
    outs:
    - path: reports/data_drift_report.html
      hash: md5
      md5: 1f6790a680fd42db3bea00a2b00c8811
      size: 110
